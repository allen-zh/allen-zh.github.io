!function(e){function n(){t(),c()}function t(){p.onload=r;for(var e=1;4>=e;e++){var n="page"+e;p.add($("#"+n)),p[n].onload=a,p[n].preload=o,p[n].index=x.push(n)-1}p.page1.show()}function o(){var e=$("#"+this.key),n=$(".page-inner",e);n.hide(),i.call(this),e.addClass("page-loaded")}function a(){var e=$("#"+this.key),n=$(".page-inner",e);n.css({"margin-top":"+=50px"}).show().animate({"margin-top":"-=50px"},200,"easeOutQuad"),i.call(this,"load")}function i(){}function c(){u(document,function(e){d(e,function(e){e>0?l():f()},20)}),s(document,function(e,n){n?l():f()}),$(document).keydown(function(e){return 38==e.keyCode||37==e.keyCode?(l(p.current.key),!1):40==e.keyCode||39==e.keyCode?(f(p.current.key),!1):void 0}),k.click(function(){var e,n=$(this).data("page"),t=p[n],o=p.current,a=o.index;if(t)return e=t.index,e===a?!1:(e>a&&t&&h(n,"bottom"),a>e&&t&&h(n,"top"),!1)})}function r(){k.removeClass(y),k.each(function(){$(this).data("page")===p.current.key&&$(this).addClass(y)})}function u(e,n){e.addEventListener?(e.addEventListener("mousewheel",n,!1),e.addEventListener("DOMMouseScroll",n,!1)):e.attachEvent?e.attachEvent("onmousewheel",n):e.onmousewheel=n}function d(e,n,t){if(E){var e=window.event||e,o=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));v&&clearTimeout(v),t?v=setTimeout(function(){v=0,n(o)},t):n(o)}}function s(e,n){e.addEventListener&&(e.addEventListener("touchstart",function(e){if(e.preventDefault(),e.changedTouches.length){var n=e.changedTouches[0];g=n.pageX,m=n.pageY}},!1),e.addEventListener("touchend",function(e){if(e.preventDefault(),e.changedTouches.length){var t=e.changedTouches[0];n(t.pageX-g>0,t.pageY-m>0)}},!1))}function h(e,n){var t=p[e];t[n]&&t[n]()}function l(){var e=p.current.index;return e--,x[e]&&h(x[e],"top"),!1}function f(){var e=p.current.index;return e++,x[e]&&h(x[e],"bottom"),!1}var p=e.parallax;p.speed=500;var v,g,m,w=$(".js_control"),k=$(".point",w),y=(document.body.scrollTop,"current"),x=[],E=!0;e.page={init:n,onDown:f,onUp:l}}(window);